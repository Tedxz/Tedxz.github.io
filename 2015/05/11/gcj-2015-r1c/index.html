<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>Google Code Jam 2015 - Round 1C | Zheng Xie&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="又到了观众朋友们（其实根本没有观众）最喜爱的GCJ题解时间，本次给大家带来的是Round 1第三轮的题解。今天跟往常一样给大家带来3道题目：

A. Brattleship
B. Typewriter Monkey
C. Less Money, More Problems

把Battleship拼成Brattleship是Google干的！我只是保持原样！">
<meta property="og:type" content="article">
<meta property="og:title" content="Google Code Jam 2015 - Round 1C">
<meta property="og:url" content="http://blog.zheng-xie.com/2015/05/11/gcj-2015-r1c/index.html">
<meta property="og:site_name" content="Zheng Xie's Blog">
<meta property="og:description" content="又到了观众朋友们（其实根本没有观众）最喜爱的GCJ题解时间，本次给大家带来的是Round 1第三轮的题解。今天跟往常一样给大家带来3道题目：

A. Brattleship
B. Typewriter Monkey
C. Less Money, More Problems

把Battleship拼成Brattleship是Google干的！我只是保持原样！">
<meta property="og:updated_time" content="2016-07-27T10:02:58.480Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Google Code Jam 2015 - Round 1C">
<meta name="twitter:description" content="又到了观众朋友们（其实根本没有观众）最喜爱的GCJ题解时间，本次给大家带来的是Round 1第三轮的题解。今天跟往常一样给大家带来3道题目：

A. Brattleship
B. Typewriter Monkey
C. Less Money, More Problems

把Battleship拼成Brattleship是Google干的！我只是保持原样！">
  
    <link rel="alternative" href="/atom.xml" title="Zheng Xie&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600' rel='stylesheet' type='text/css'>
  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  

  
<!-- Baidu Tongji -->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?d9024b8d3d6c0966a3865ec1deaa6d16";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<!-- End Baidu Tongji --><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <a href="/" class="logo">Zheng Xie&#39;s Blog</a>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archive">Archive</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://blog.zheng-xie.com"></form>
        </div>
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        
          <a id="nav-github-link" class="nav-icon" href="https://github.com/tedxz" title="Fork me on GitHub"></a>
        
      </nav>
    </div>
  </div>
</header>

      <nav id="mobile-nav" class="off">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archive" class="mobile-nav-link">Archive</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
  <div id="search-form-wrap-mobile">
    <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://blog.zheng-xie.com"></form>
  </div>
</nav>
      <div class="outer">
        
          <aside id="sidebar">
  
    <!-- following commented lines are original tag cloud -->
<!-- 
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Algorithm/" style="font-size: 10px;">Algorithm</a> <a href="/tags/Algorithm-Contest/" style="font-size: 15px;">Algorithm Contest</a> <a href="/tags/Bluetooth/" style="font-size: 10px;">Bluetooth</a> <a href="/tags/C/" style="font-size: 10px;">C++</a> <a href="/tags/Coursera/" style="font-size: 10px;">Coursera</a> <a href="/tags/Data-Minning/" style="font-size: 10px;">Data Minning</a> <a href="/tags/Decision-Tree/" style="font-size: 10px;">Decision Tree</a> <a href="/tags/Diary/" style="font-size: 17.5px;">Diary</a> <a href="/tags/Dualboot/" style="font-size: 12.5px;">Dualboot</a> <a href="/tags/Google-Codejam/" style="font-size: 15px;">Google Codejam</a> <a href="/tags/Hagashino-Keiko/" style="font-size: 10px;">Hagashino Keiko</a> <a href="/tags/Image-Classification/" style="font-size: 10px;">Image Classification</a> <a href="/tags/Intern/" style="font-size: 10px;">Intern</a> <a href="/tags/Linear-Regression/" style="font-size: 10px;">Linear Regression</a> <a href="/tags/Linux/" style="font-size: 12.5px;">Linux</a> <a href="/tags/Literature/" style="font-size: 10px;">Literature</a> <a href="/tags/Logistic-Regression/" style="font-size: 12.5px;">Logistic Regression</a> <a href="/tags/Machine-Learning/" style="font-size: 20px;">Machine Learning</a> <a href="/tags/Network/" style="font-size: 10px;">Network</a> <a href="/tags/Personal-Review/" style="font-size: 12.5px;">Personal Review</a> <a href="/tags/Regularization/" style="font-size: 10px;">Regularization</a> <a href="/tags/STL/" style="font-size: 10px;">STL</a> <a href="/tags/Skill/" style="font-size: 15px;">Skill</a> <a href="/tags/Supprot-Vector-Machine/" style="font-size: 10px;">Supprot Vector Machine</a> <a href="/tags/Trip/" style="font-size: 10px;">Trip</a> <a href="/tags/Windows/" style="font-size: 10px;">Windows</a>
    </div>
  </div>
 -->

<!-- following lines are new tag cloud -->

    <script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script>
    <script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script>
    <div class="widget-wrap">
        <h3 class="widget-title">tagcloud</h3>
        <div id="myCanvasContainer" class="widget tagcloud">
            <canvas width="190" height="190" id="resCanvas" style="width=50%">
                <a href="/tags/Algorithm/" style="font-size: 10px;">Algorithm</a> <a href="/tags/Algorithm-Contest/" style="font-size: 15px;">Algorithm Contest</a> <a href="/tags/Bluetooth/" style="font-size: 10px;">Bluetooth</a> <a href="/tags/C/" style="font-size: 10px;">C++</a> <a href="/tags/Coursera/" style="font-size: 10px;">Coursera</a> <a href="/tags/Data-Minning/" style="font-size: 10px;">Data Minning</a> <a href="/tags/Decision-Tree/" style="font-size: 10px;">Decision Tree</a> <a href="/tags/Diary/" style="font-size: 17.5px;">Diary</a> <a href="/tags/Dualboot/" style="font-size: 12.5px;">Dualboot</a> <a href="/tags/Google-Codejam/" style="font-size: 15px;">Google Codejam</a> <a href="/tags/Hagashino-Keiko/" style="font-size: 10px;">Hagashino Keiko</a> <a href="/tags/Image-Classification/" style="font-size: 10px;">Image Classification</a> <a href="/tags/Intern/" style="font-size: 10px;">Intern</a> <a href="/tags/Linear-Regression/" style="font-size: 10px;">Linear Regression</a> <a href="/tags/Linux/" style="font-size: 12.5px;">Linux</a> <a href="/tags/Literature/" style="font-size: 10px;">Literature</a> <a href="/tags/Logistic-Regression/" style="font-size: 12.5px;">Logistic Regression</a> <a href="/tags/Machine-Learning/" style="font-size: 20px;">Machine Learning</a> <a href="/tags/Network/" style="font-size: 10px;">Network</a> <a href="/tags/Personal-Review/" style="font-size: 12.5px;">Personal Review</a> <a href="/tags/Regularization/" style="font-size: 10px;">Regularization</a> <a href="/tags/STL/" style="font-size: 10px;">STL</a> <a href="/tags/Skill/" style="font-size: 15px;">Skill</a> <a href="/tags/Supprot-Vector-Machine/" style="font-size: 10px;">Supprot Vector Machine</a> <a href="/tags/Trip/" style="font-size: 10px;">Trip</a> <a href="/tags/Windows/" style="font-size: 10px;">Windows</a>
            </canvas>
        </div>
    </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/07/21/large-margin-distribution-learning/">机器学习中的“Margin”</a>
          </li>
        
          <li>
            <a href="/2016/05/05/secret-higashino-keiko/">《秘密》- 东野圭吾</a>
          </li>
        
          <li>
            <a href="/2016/04/16/routing-between-multiple-networks/">Routing Among Multiple Networks</a>
          </li>
        
          <li>
            <a href="/2015/10/12/away-from-beijing/">离开北京</a>
          </li>
        
          <li>
            <a href="/2015/06/13/reivew-of-second-semester-in-junior/">记即将过去的大三下学期</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm-Contest/">Algorithm Contest</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Diary/">Diary</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Literature/">Literature</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Machine-Learning/">Machine Learning</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Skill/">Skill</a><span class="category-list-count">5</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archive/2016/07/">July 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2016/05/">May 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2016/04/">April 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2015/10/">October 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2015/06/">June 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2015/05/">May 2015</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2015/04/">April 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2015/03/">March 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2015/02/">February 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2015/01/">January 2015</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2014/12/">December 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2014/10/">October 2014</a><span class="archive-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algorithm/">Algorithm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algorithm-Contest/">Algorithm Contest</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bluetooth/">Bluetooth</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C++</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Coursera/">Coursera</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Data-Minning/">Data Minning</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Decision-Tree/">Decision Tree</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Diary/">Diary</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dualboot/">Dualboot</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Google-Codejam/">Google Codejam</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hagashino-Keiko/">Hagashino Keiko</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Image-Classification/">Image Classification</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Intern/">Intern</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linear-Regression/">Linear Regression</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Literature/">Literature</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Logistic-Regression/">Logistic Regression</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Machine-Learning/">Machine Learning</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Network/">Network</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Personal-Review/">Personal Review</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Regularization/">Regularization</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/STL/">STL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Skill/">Skill</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Supprot-Vector-Machine/">Supprot Vector Machine</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Trip/">Trip</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Windows/">Windows</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">links</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="https://irl.cs.ucla.edu/~yumin/">Yumin Xia</a>
          </li>
        
          <li>
            <a href="http://plypy.github.io">Ply_py</a>
          </li>
        
          <li>
            <a href="http://shirleychen.net/">十七君</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
        <section id="main"><article id="post-gcj-2015-r1c" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/05/11/gcj-2015-r1c/" class="article-date">
  <time datetime="2015-05-11T14:41:53.000Z" itemprop="datePublished">2015-05-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Algorithm-Contest/">Algorithm Contest</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Google Code Jam 2015 - Round 1C
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>又到了观众朋友们<del>（其实根本没有观众）</del>最喜爱的GCJ题解时间，本次给大家带来的是Round 1第三轮的题解。今天跟往常一样给大家带来3道题目：</p>
<ul>
<li>A. Brattleship</li>
<li>B. Typewriter Monkey</li>
<li>C. Less Money, More Problems</li>
</ul>
<p><em>把Battleship拼成Brattleship是Google干的！我只是保持原样！</em></p>
<a id="more"></a>
<hr>
<h2 id="A-Brattleship"><a href="#A-Brattleship" class="headerlink" title="A. Brattleship"></a>A. Brattleship</h2><p>You&apos;re about to play a simplified &quot;battleship&quot; game with your little brother. The board for this game is a rectangular grid with <b>R</b> rows and <b>C</b> columns. At the start of the game, you will close your eyes, and you will keep them closed until the end of the game. Your little brother will take a single rectangular 1 x <b>W</b> ship and place it <b>horizontally</b> somewhere on the board. The ship must always fit entirely on the board, with each cell of the ship occupying exactly one of the grid&apos;s cells, and it can never be rotated.</p>
<p>In each turn of the game, you name a cell on the board, and your little brother tells you whether that is a hit (one of the cells occupied by the ship) or a miss. (Your little brother doesn&apos;t say <i>which</i> part of the ship was hit – just that the cell you named has a part of the ship in it.) You have perfect memory, and can keep track of all the information he has given you. Once you have named all of the cells occupied by the ship, the game is over (the ship is sunk), and your score is the number of turns taken. Your goal is to minimize your score.</p>
<p>Although the ship is not supposed to be moved once it is placed, you know that your little brother, who is a brat, plans to cheat by changing the location of the ship whenever he wants, as long as the ship remains horizontal and completely on the board, and the new location is consistent with all the information he has given so far. For example, for a 1x4 board and 1x2 ship, your little brother could initially place the ship such that it overlaps the leftmost two columns. If your first guess was row 1, column 2, he could choose to secretly move the ship to the rightmost two columns, and tell you that (1, 2) was a miss. If your next guess after that was (1, 3), though, then he could not say that was also a miss and move the ship back to its original location, since that would be inconsistent with what he said about (1, 2) earlier.</p>
<p>Not only do you know that your little brother will cheat, he knows that you know. If you both play optimally (you to minimize your score, him to maximize it), what is the lowest score that you can <b>guarantee</b> you will achieve, regardless of what your little brother does?</p>
<h3>Input</h3>

<p>The first line of the input gives the number of test cases, <b>T</b>. <b>T</b> lines follow, each with three space-separated integers <b>R</b>, <b>C</b>, and <b>W</b>: the number of rows and columns of the board, followed by the width of the ship.</p>
<h3>Output</h3>

<p>For each test case, output one line containing &quot;Case #x: y&quot;, where x is the test case number (starting from 1) and y is the minimum score you can guarantee.</p>
<h3>Limits</h3>

<p>1 ≤ <b>W</b> ≤ <b>C</b>.</p>
<h4>Small dataset</h4>

<p><b>T</b> = 55.<br><b>R</b> = 1.<br>1 ≤ <b>C</b> ≤ 10.</p>
<h4>Large dataset</h4>

<p>1 ≤ <b>T</b> ≤ 100.<br>1 ≤ <b>R</b> ≤ 20.<br>1 ≤ <b>C</b> ≤ 20.</p>
<hr>
<h2 id="A-Solution"><a href="#A-Solution" class="headerlink" title="A. Solution"></a>A. Solution</h2><p>相信大家都玩过类似的游戏，这个题目是其简化版。</p>
<p>题目大意：你和你的小哥哥（误）（我就不翻译成弟弟）玩游戏，他在一个R<em>C的棋盘上水平放置一个1</em>W的战船，但是你并不能直接看到这艘船。每个回合，你可以向棋盘上某个格子开炮，并可以知道是否击中。你的目标是用最短的回合数将战舰所占的格子全部炮击以将其击沉。然而小哥哥比较狡猾，在不影响你已经炮击的格子的结果的情况下，他会尽量让你完成任务的回合数增长。试问双方在各自的最优规则下，你需要多少回合击沉战舰。</p>
<p>这个问题总的来说并不复杂，但是在某些情况下并不知道双方的最优策略是什么；或者说想出来双方的最优策略还需要证明其最优性。</p>
<p>很显然，由于你的小哥哥太坑爹，我们在进行游戏的时候首先应该将棋盘的(R-1)行排除战舰藏匿的可能（坑爹的小哥哥不会让你在超过一行可能藏匿战舰的情况下击中战舰），然后在最后剩下的一行中将战舰逼迫现身。<strong>由于题目中说明战舰一定是水平放置，将一行排除只要每间隔(W-1)个格子炮击一次即可。扫清(R-1)行只需要炮击(R-1)*floor(C/W)次。 </strong></p>
<p>剩下一行连续的C个格子中有连续的W个格子中有战船。经过考虑我发现可以将问题以以下的几种情况概况，并一步一步将问题规模减小：</p>
<ol>
<li><strong>W=1。</strong>这个时候，我们必须将C个格子逐一炮击才能将战舰完全击沉。<strong>答案累计C并结束。</strong></li>
<li><strong>C≥2W。</strong>这个时候，我们下一炮一定无法击中战舰，因此只能最大程度上缩小战舰所在的范围。在连续的C个格子一端起第W个格子处炮击是最优的做法之一，<strong>答案累计1，C=C-W。</strong></li>
<li><strong>C&lt;2W。</strong>这个时候，猛击C个格子的中间格子，必定能击中战舰。这里有一个推论：<em>如果能击中战舰，优先打击确定能击中的格子</em>；因为你早晚要打这一炮。<strong>答案累计1，C=C-1，W=W-1。</strong></li>
</ol>
<p>由于问题规模不大，这个算法也无需实现成记忆话搜索。问题得到解决。</p>
<hr>
<h2 id="B-Typewriter-Monkey"><a href="#B-Typewriter-Monkey" class="headerlink" title="B. Typewriter Monkey"></a>B. Typewriter Monkey</h2><p>Your publishing house has decided to use monkeys randomly typing at keyboards to write great works of literature. You are the supervisor for one monkey with a keyboard containing <b>K</b> keys, each of which is labeled with an uppercase English letter. (There may be multiple keys displaying the same letter.) The monkey will start with an empty string and repeat the following <b>S</b> times: choose a key from its keyboard uniformly at random and press it, adding a copy of that key&apos;s letter to the right end of the string. The final resulting string will have length <b>S</b>.</p>
<p>You have a <i>target word</i> of length <b>L</b> that you are hoping the monkey will type. (The target word will not necessarily be a real English word.) This target word may even appear multiple times in what the monkey types. (Overlapping instances count too – for example, if &quot;ABA&quot; is the target word and the monkey types &quot;ABABA&quot;, that contains two instances of the target.)</p>
<p>You plan to pay the monkey one banana for each instance of the target word that it types. When you go to inspect the monkey&apos;s work, you will bring along the minimum number of bananas that you need to <i>ensure</i> that you will always have enough bananas to pay the monkey, no matter what it has typed. Then, you will pay the monkey one banana for each instance of the target word that it <i>actually</i> typed. You will keep the remaining bananas that you brought with you.</p>
<p>What is the expected number of bananas that you will get to keep?</p>
<h3>Input</h3>

<p>The first line of the input gives the number of test cases, <b>T</b>.  <b>T</b> test cases follow. Each consists of three lines. The first contains three space-separated positive integers: <b>K</b>, <b>L</b>, and <b>S</b>. The second contains a string of <b>K</b> uppercase English letters representing the monkey&apos;s keyboard. The third contains a string of <b>L</b> uppercase English letters representing the target word.</p>
<h3>Output</h3>

<p>For each test case, output one line containing &quot;Case #x: y&quot;, where y is the expected number of bananas you will get to keep after paying the monkey.</p>
<p>y will be considered correct if it is within an absolute or relative error of 10<sup>-6</sup> of the correct answer.  See the <a href="https://code.google.com/codejam/faq.html#floating_point" target="_blank" rel="external">FAQ</a>  for an explanation of what that means, and what formats of real numbers we accept.</p>
<h3>Limits</h3>

<p>1 ≤ <b>T</b> ≤ 100.</p>
<h4>Small dataset</h4>

<p>1 ≤ <b>K</b> ≤ 7.<br>1 ≤ <b>L</b> ≤ <b>S</b> ≤ 7.</p>
<h4>Large dataset</h4>

<p>1 ≤ <b>K</b> ≤ 100.<br>1 ≤ <b>L</b> ≤ <b>S</b> ≤ 100.</p>
<hr>
<h2 id="B-Solution"><a href="#B-Solution" class="headerlink" title="B. Solution"></a>B. Solution</h2><blockquote>
<p>猴子和打字机（Monkeys and Typewriters），如果无数多的猴子在无数多的打字机上随机的打字，并持续无限久的时间，那么在某个时候，它们必然会打出莎士比亚的全部著作。猴子和打字机的设想在20世纪初被法国数学家Emile Borel推广，但其基本思想——无数多的人员和无数多的时间能产生任何/所有东西——可以追溯至亚里士多德。</p>
</blockquote>
<p>题目大意：在一个给定的键盘布局上，猴子随机的敲S个键，每碰巧敲出一个keyword（允许重叠），你就要奖励他一个香蕉。你带来了满足在任何情况下都能足够奖励猴子的个数的香蕉（并且尽量少），但是大多数情况下这些香蕉并不能全部奖励出去。你要计算的是你剩下香蕉的期望个数。</p>
<p>这个问题分为两个部分：求出最多可能出现的keyword出现次数（要带多少香蕉）和keyword出现次数的期望（给出的香蕉期望）。</p>
<p>第一个问题比较好解决：算一下关键字最少偏移多少距离可以自重合，然后算最多出现次数了。不多说，了解KMP的都懂。</p>
<p>第二个问题：因为每个位置出现关键字互不影响；我们计算所有情况下在每个位置会出现的关键字次数；除以总的可能出现的字符串个数记得到keyword出现的期望次数。</p>
<p>不考虑键盘有重复按键的话，在特定位置出现关键字的不同情况一共是K^(S-L)。由于有(S-L+1)个不同的起点，两者相乘。由于按键有可能重复，对于keyword中的每个字母，乘以这个字符在键盘中出现的次数即可（记为multiplier）。</p>
<p>最终期望为：multiplier*K^(S-L)*(S-L+1)/(K^S)，约分得multiplier*(S-L+1)/(K^L)。</p>
<p>另外需要特判一下键盘根本打不出来这个关键字的情况。</p>
<hr>
<h2 id="C-Less-Money-More-Problems"><a href="#C-Less-Money-More-Problems" class="headerlink" title="C. Less Money, More Problems"></a>C. Less Money, More Problems</h2><p>Up until today, the nation you live in has used <b>D</b> different positive integer denominations of coin for all transactions. Today, the queen got angry when a subject tried to pay his taxes with a giant sack of low-valued coins, and she just decreed that no more than <b>C</b> coins of any one denomination may be used in any one purchase. For instance, if <b>C</b> = 2 and the existing denominations are 1 and 5, it is possible to buy something of value 11 by using two 5s and one 1, or something of value 12 by using two 5s and two 1s, but it is impossible to buy something of value 9 or 17.</p>
<p>You cannot directly challenge the queen&apos;s decree, but you happen to be in charge of the mint, and you <i>can</i> issue new denominations of coin. You want to make it possible for <i>any</i> item of positive value at most <b>V</b> to be purchased under the queen&apos;s new rules. (Note that this may not necessarily have been possible before the queen&apos;s decree.) Moreover, you want to introduce as few new denominations as possible, and your final combined set of pre-existing and new denominations may not have any repeats.</p>
<p>What is the smallest number of new denominations required?</p>
<h3>Input</h3>

<p>The first line of the input gives the number of test cases, <b>T</b>. <b>T</b> test cases follow. Each consists of one line with three space-separated values <b>C</b>, <b>D</b>, and <b>V</b>, followed by another line with <b>D</b> distinct space-separated values representing the preexisting denominations, in ascending order.</p>
<h3>Output</h3>

<p>For each test case, output one line containing &quot;Case #x: y&quot;, where x is the test case number (starting from 1) and y is the minimum number of new denominations required, as described above.</p>
<h3>Limits</h3>

<p>1 ≤ <b>T</b> ≤ 100.<br>Each existing denomination ≤ <b>V</b>.</p>
<h4>Small dataset</h4>

<p><b>C</b> = 1.<br>1 ≤ <b>D</b> ≤ 5.<br>1 ≤ <b>V</b> ≤ 30.</p>
<h4>Large dataset</h4>

<p>1 ≤ <b>C</b> ≤ 100.<br>1 ≤ <b>D</b> ≤ 100.<br>1 ≤ <b>V</b> ≤ 10<sup>9</sup>.</p>
<hr>
<h2 id="C-Solution"><a href="#C-Solution" class="headerlink" title="C.Solution"></a>C.Solution</h2><p>题目大意：女王下令在每一次支付活动中，同一种面值的货币不能使用超过C个。你作为发行货币的官员，希望在满足女王懿旨的情况下增加货币的面值，使得不超过V元的交易都能完成。目前已有D种不同面值的货币，请问最少增加多少种不同面值的货币？</p>
<p><strong>设货币按面值排序，第1~(i-1)中货币应该能凑出来0~(d[i]-1)中所有的额度。</strong> 其中di是第i小的货币的面值。如果不能，设前(i-1)种货币最多能凑出1~maxv[i-1]的所有面值，那么我们应该增发面值为d&apos;=maxv[i-1]+1的货币。d&apos;缩小将缩小货币组合面值的能力，增大则不能连续组合面值。</p>
<p>因此从小到大维护前i种面值能连续组合的最大面值。对于每次循环取出一个面值更大的货币：如果d[i]&gt;maxv[i-1]+1，那么添加一个面值为d&apos;=maxv[i-1]+1的货币，此时连续能够组合的面值为maxv=maxv+d&apos;*c；否则继续取下一个已有的面值，maxv=maxv+d[i]*c。</p>

      
    </div>

    <footer class="article-footer">
      
        <a data-url="http://blog.zheng-xie.com/2015/05/11/gcj-2015-r1c/" data-id="cj2x9mhph0014emo1wc7j1f3j" class="article-share-link" data-share="baidu">share</a>
      

      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algorithm-Contest/">Algorithm Contest</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Google-Codejam/">Google Codejam</a></li></ul>

    </footer>

  </div>

  
    
<nav id="article-nav">
  
    <a href="/2015/05/12/std-sort-with-non-static-method/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          使用非静态成员函数作为std::sort的比较函数
        
      </div>
    </a>
  
  
    <a href="/2015/05/03/enumerate-nums-by-1-bits/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">按照1的个数枚举数字</div>
    </a>
  
</nav>

  
</article>


</section>
      </div>
      <footer id="footer">
  
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"> </script>
  <div class="outer">
    <div id="footer-info" class="inner">
      <a href="/" class="logo">Zheng Xie&#39;s Blog</a>
      &copy; 2017 Zheng Xie<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> | Themed by <a href="https://github.com/ppoffice/hexo-theme-alex">Alex</a><br>
    </div>
  </div>
</footer>

    </div>
    

<!-- 百度分享 start -->

<div id="article-share-box" class="article-share-box">
  <div id="bdshare" class="bdsharebuttonbox article-share-links">
    <a class="article-share-weibo" data-cmd="tsina" title="分享到新浪微博"></a>
    <a class="article-share-weixin" data-cmd="weixin" title="分享到微信"></a>
    <a class="article-share-qq" data-cmd="sqq" title="分享到QQ"></a>
    <a class="article-share-renren" data-cmd="renren" title="分享到人人网"></a>
    <a class="article-share-more" data-cmd="more" title="更多"></a>
  </div>
</div>
<script>window._bd_share_config={"common":{},"share":{"bdCustomStyle":"nocss.css"}};with(document)0[(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion="+~(-new Date()/36e5)];</script>

<!-- 百度分享 end -->

<!-- fancybox begin -->


<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.scrollLoading.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>

  <link rel="stylesheet" href="/fancybox/helpers/jquery.fancybox-buttons.css">
  <script src="/fancybox/helpers/jquery.fancybox-buttons.js"></script>

  <link rel="stylesheet" href="/fancybox/helpers/jquery.fancybox-thumbs.css">
  <script src="/fancybox/helpers/jquery.fancybox-thumbs.js"></script>



<script src="/js/script.js"></script>
<!-- fancybox end -->

  </div>
<!-- the next line is mathjax contained in theme alex. -->
<!-- mathjax config similar to math.stackexchange -->
<!-- commented to disable -->

<!-- <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script> --><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</body>
</html>
